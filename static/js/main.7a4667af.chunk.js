(this["webpackJsonpkaamelott-soundboard"]=this["webpackJsonpkaamelott-soundboard"]||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(13)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(3),c=n.n(o),u=(n(11),n(1)),l=n(4),i=n.n(l);function s(e){var t=e.file,n=e.title,o=function(e){var t=Object(r.useMemo)((function(){return new Audio("sounds/".concat(e))}),[e]),n=Object(r.useRef)(),a=Object(r.useState)(!1),o=Object(u.a)(a,2),c=o[0],l=o[1],s="rythm-".concat(e.replace(/\./g,"-")),m=Object(r.useCallback)((function(){l(!0),n.current||(n.current=new i.a,n.current.connectExternalAudioElement(t),n.current.addRythm(s,"pulse",150,40)),n.current.start()}),[t,s]),p=Object(r.useCallback)((function(){l(!1),n.current.stop()}),[]);Object(r.useEffect)((function(){return t.addEventListener("play",m),t.addEventListener("ended",p),function(){t.removeEventListener("play",m),t.removeEventListener("ended",p)}}),[t,p,m]);var f=Object(r.useCallback)((function(){c?t.currentTime=t.duration:t.play()}),[t,c]);return{rythmClassName:s,playStop:f}}(t),c=o.playStop,l=o.rythmClassName;return a.a.createElement("button",{onClick:c,className:l},n)}var m=Object(r.createContext)({});function p(){var e=Object(r.useContext)(m).characters,t=Object(r.useContext)(m).sounds,n=Object(r.useContext)(m).books,o=Object(r.useState)(),c=Object(u.a)(o,2),l=c[0],i=c[1],p=Object(r.useState)(),f=Object(u.a)(p,2),d=f[0],b=f[1],v=Object(r.useMemo)((function(){return t.filter((function(e){return!(l&&!e.characters.includes(l))&&(!d||e.episode.key===d)}))}),[d,l,t]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement("select",{onChange:function(e){return i(e.target.value)}},a.a.createElement("option",null),e.map((function(e){return a.a.createElement("option",{key:e,value:e},e)}))),a.a.createElement("select",{onChange:function(e){return b(e.target.value)}},a.a.createElement("option",null),n.map((function(e){return a.a.createElement("optgroup",{key:e.title,label:e.title},e.episodes.map((function(e){return a.a.createElement("option",{key:e.key,value:e.key},e.title)})))})))),a.a.createElement("div",null,v.map((function(e){return a.a.createElement(s,Object.assign({key:e.file},e))}))))}n(12);function f(){return a.a.createElement("div",{className:"app"},a.a.createElement(p,null))}var d=n(5);function b(e){var t=e.children,n=Object(r.useState)([]),o=Object(u.a)(n,2),c=o[0],l=o[1];Object(r.useEffect)((function(){fetch("sounds/sounds.json").then((function(e){return e.json()})).then(l).catch(console.error)}),[]);var i=Object(r.useMemo)((function(){var e=c.map(v).sort((function(e,t){return e.title.localeCompare(t.title)})),t=Array.from(new Set(e.flatMap((function(e){return e.characters})))).sort(),n=Array.from(new Map(e.map((function(e){return[e.episode.key,e.episode]}))).values()).sort((function(e,t){return e.key.localeCompare(t.key)})),r=new Map(n.map((function(e){return[e.book,{title:e.book,episodes:[]}]}))),a=Array.from(r.values()).sort((function(e,t){return e.title.localeCompare(t.title)}));return n.forEach((function(e){return r.get(e.book).episodes.push(e)})),{sounds:e,characters:t,episodes:n,books:a}}),[c]);return a.a.createElement(m.Provider,{value:i},t)}function v(e){var t=/^(Livre (\w+)),? ((\d+) - .+)$/.exec(e.episode),n=t?{key:"".concat(t[2],"_").concat(t[4]),book:t[1],title:t[3]}:{key:e.episode,book:e.episode,title:e.episode};return Object(d.a)({},e,{characters:e.character.split(" - "),episode:n})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(b,null,a.a.createElement(f,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[6,1,2]]]);
//# sourceMappingURL=main.7a4667af.chunk.js.map