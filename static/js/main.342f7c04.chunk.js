(this["webpackJsonpkaamelott-soundboard"]=this["webpackJsonpkaamelott-soundboard"]||[]).push([[0],[,,,,,,function(e,t,n){e.exports=n(14)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(3),c=n.n(o),u=(n(11),n(1)),i=n(4),s=n.n(i),l=Object(r.createContext)({});function m(){return Object(r.useContext)(l).characters}n(12);function f(e){var t=e.file,n=e.title,o=e.characters,c=function(e){var t=Object(r.useMemo)((function(){return new Audio("sounds/".concat(e))}),[e]),n=Object(r.useRef)(),a=Object(r.useState)(!1),o=Object(u.a)(a,2),c=o[0],i=o[1],l="rythm-".concat(e.replace(/\./g,"-")),m=Object(r.useCallback)((function(){i(!0),n.current||(n.current=new s.a,n.current.connectExternalAudioElement(t),n.current.addRythm(l,"pulse",150,40,{min:1,max:1.5})),n.current.start()}),[t,l]),f=Object(r.useCallback)((function(){i(!1),n.current.stop()}),[]);Object(r.useEffect)((function(){return t.addEventListener("play",m),t.addEventListener("ended",f),function(){t.removeEventListener("play",m),t.removeEventListener("ended",f)}}),[t,f,m]);var d=Object(r.useCallback)((function(){c?t.currentTime=t.duration:t.play()}),[t,c]);return{rythmClassName:l,playStop:d}}(t),i=c.playStop,l=c.rythmClassName,f=function(e){var t=m();return Object(r.useMemo)((function(){var n=t.find((function(t){return t.name===e}));return n||console.log(e),n}),[t,e])}(o[0]);return a.a.createElement("button",{onClick:i,className:"sound"},f.file&&a.a.createElement("img",{src:"characters/".concat(f.file),alt:"Personnage",className:l,height:"50"}),n)}function d(){var e=m(),t=Object(r.useContext)(l).sounds,n=Object(r.useContext)(l).books,o=Object(r.useState)(),c=Object(u.a)(o,2),i=c[0],s=c[1],d=Object(r.useState)(),p=Object(u.a)(d,2),b=p[0],h=p[1],v=Object(r.useMemo)((function(){return t.filter((function(e){return!(i&&!e.characters.includes(i))&&(!b||e.episode.key===b)}))}),[b,i,t]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,a.a.createElement("select",{onChange:function(e){return s(e.target.value)}},a.a.createElement("option",null),e.map((function(e){return a.a.createElement("option",{key:e.name,value:e.name},e.name)}))),a.a.createElement("select",{onChange:function(e){return h(e.target.value)}},a.a.createElement("option",null),n.map((function(e){return a.a.createElement("optgroup",{key:e.title,label:e.title},e.episodes.map((function(e){return a.a.createElement("option",{key:e.key,value:e.key},e.title)})))})))),a.a.createElement("div",null,v.map((function(e){return a.a.createElement(f,Object.assign({key:e.file},e))}))))}n(13);function p(){return a.a.createElement("div",{className:"app"},a.a.createElement(d,null))}var b=n(5);function h(e){var t=e.children,n=Object(r.useState)([]),o=Object(u.a)(n,2),c=o[0],i=o[1],s=Object(r.useState)([]),m=Object(u.a)(s,2),f=m[0],d=m[1];Object(r.useEffect)((function(){fetch("sounds/sounds.json").then((function(e){return e.json()})).then(i).catch(console.error)}),[]),Object(r.useEffect)((function(){fetch("characters/characters.json").then((function(e){return e.json()})).then(d).catch(console.error)}),[]);var p=Object(r.useMemo)((function(){var e=c.map(v).sort((function(e,t){return e.title.localeCompare(t.title)})),t=Array.from(new Set(e.flatMap((function(e){return e.characters})))).sort().map((function(e){var t;return null!==(t=f.find((function(t){return t.name===e})))&&void 0!==t?t:{name:e}})),n=Array.from(new Map(e.map((function(e){return[e.episode.key,e.episode]}))).values()).sort((function(e,t){return e.key.localeCompare(t.key)})),r=new Map(n.map((function(e){return[e.book,{title:e.book,episodes:[]}]}))),a=Array.from(r.values()).sort((function(e,t){return e.title.localeCompare(t.title)}));return n.forEach((function(e){return r.get(e.book).episodes.push(e)})),{sounds:e,characters:t,episodes:n,books:a}}),[f,c]);return a.a.createElement(l.Provider,{value:p},t)}function v(e){var t=/^(Livre (\w+)),? ((\d+) - .+)$/.exec(e.episode),n=t?{key:"".concat(t[2],"_").concat(t[4]),book:t[1],title:t[3]}:{key:e.episode,book:e.episode,title:e.episode};return Object(b.a)({},e,{characters:e.character.split(" - "),episode:n})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(h,null,a.a.createElement(p,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[6,1,2]]]);
//# sourceMappingURL=main.342f7c04.chunk.js.map